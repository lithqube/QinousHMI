<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:atv="http://webmi.atvise.com/2007/svgext" width="964" version="1.2" height="600" visibility="hidden" atv:oe="2BC6E3BA9386L2KEE9ICI6H8M7O4P31F365AECD499I181IBLDHCP3HBN5KFQDC83" xmlns="http://www.w3.org/2000/svg">
 <defs/>
 <metadata/>
 <polygon fill="#bacd69" id="id_31" points="96,43 336,279 235,58 491,39 752,564 827,428 811,221 95,568 340,464 940,128 481,103 113,255 851,120 " stroke="#f8e9a2" stroke-width="5"/>
 <line fill="#b88d01" id="id_25" stroke="#1ecc69" stroke-width="5" x1="176" x2="92" y1="478" y2="296"/>
 <line fill="#fe9311" id="id_18" stroke="#fa4664" stroke-width="1" x1="627" x2="957" y1="444" y2="303"/>
 <line fill="#529831" id="id_14" stroke="#6a739f" stroke-width="1" x1="400" x2="531" y1="261" y2="0"/>
 <text x="16.25" y="22" fill="#647a8f" font-family="Varela Round" id="id_3" atv:refpx="24.135" atv:refpy="16.45" font-size="20" transform="matrix(0.94,0,0,0.94,0.7052,0)">HVAC AND ENVIRONMENT</text>
 <polyline fill="#bd4c55" id="id_11" points="504,41 490,543 798,176 708,342 165,241 61,27 429,173 " stroke="#a3385c" stroke-width="5"/>
 <polygon fill="#0b07aa" id="id_9" points="504,273 920,282 361,383 384,115 843,91 685,180 885,182 500,403 144,454 " stroke="#3e4a46" stroke-width="1"/>
 <rect fill="#18d377" height="8" id="id_7" stroke="#8c2726" stroke-width="5" width="250" x="429" y="578"/>
 <ellipse cx="95" cy="295" fill="#567484" id="id_2" rx="436" ry="126" stroke="#2d945a" stroke-width="3"/>
 <polyline fill="#cbb420" id="id_30" points="317,313 109,378 595,576 242,459 70,347 260,135 " stroke="#5d242c" stroke-width="3"/>
 <line fill="#0e9330" id="id_28" stroke="#4d8689" stroke-width="2" x1="933" x2="27" y1="253" y2="525"/>
 <circle cx="376" cy="82" fill="#a2bc8f" id="id_26" r="246" stroke="#0ad891" stroke-width="5"/>
 <ellipse cx="376" cy="214" fill="#707737" id="id_24" rx="375" ry="104" stroke="#6279e4" stroke-width="3"/>
 <circle cx="373" cy="586" fill="#9ad5f5" id="id_20" r="246" stroke="#d3af8f" stroke-width="5"/>
 <g atv:table-height="260" id="commands" atv:refpx="598.325" atv:table-width="640" atv:refpy="288.188" transform="matrix(0.94,0,0,0.94,116.0149,32.8994)">
  <line fill="#41b0af" id="id_33" stroke="#fc2736" stroke-width="5" x1="779" x2="466" y1="282" y2="440"/>
  <polyline fill="#fcb3d4" id="id_32" points="245,54 932,110 772,465 899,47 321,41 457,292 174,241 732,74 821,169 373,475 390,191 527,214 84,486 " stroke="#93ff19" stroke-width="4"/>
  <polyline fill="#f4f426" id="id_29" points="828,414 267,222 537,94 347,576 748,515 758,336 286,4 376,531 668,136 10,80 755,324 87,68 " stroke="#3e2d3a" stroke-width="2"/>
  <circle cx="963" cy="589" fill="#92ec79" id="id_27" r="186" stroke="#96a501" stroke-width="3"/>
  <rect fill="#249ebc" height="240" id="id_23" stroke="#5c1c1c" stroke-width="3" width="375" x="220" y="329"/>
  <circle cx="341" cy="176" fill="#8f8b68" id="id_22" r="8" stroke="#024567" stroke-width="5"/>
  <rect width="900" fll="#647A8F" x="0" y="0" rx="5" ry="5" height="600" id="rect1" atv:refpx="800" atv:refpy="300"/>
  <ellipse cx="913" cy="315" fill="#9e6d33" id="id_21" rx="266" ry="217" stroke="#7aceeb" stroke-width="4"/>
  <polygon fill="#157123" id="id_13" points="401,526 281,209 749,245 754,471 127,341 883,119 819,63 607,292 461,178 246,226 760,357 433,305 590,382 " stroke="#9d1c1d" stroke-width="4"/>
  <circle cx="918" cy="332" fill="#aefaa0" id="id_12" r="191" stroke="#ce0eea" stroke-width="3"/>
  <line fill="#17083b" id="id_10" stroke="#5d88ae" stroke-width="4" x1="171" x2="317" y1="502" y2="431"/>
  <polygon fill="#1c399b" id="id_8" points="235,190 826,178 291,380 164,206 451,353 " stroke="#45174d" stroke-width="2"/>
  <rect fill="#ad5c87" height="1" id="id_6" stroke="#b5219f" stroke-width="5" width="115" x="808" y="599"/>
  <line fill="#cd5a0f" id="id_4" stroke="#5638fc" stroke-width="3" x1="217" x2="729" y1="426" y2="160"/>
 </g>
 <script xlink:href="../../webmi.js" type="text/ecmascript"/>
 <script xlink:href="/q/TableFunctions.js" type="text/ecmascript"/>
 <script xlink:href="/q/StdConstantsFunctions.js" type="text/ecmascript"/>
 <script type="text/ecmascript"><![CDATA[webMI.proxy({"":[function(webMI,window,document,self){var $ = top.$;
var enviroHeaders = [];
var	RowHeight = 30,
	linefill = "#FFFFFF",
	columnfill = "#FFFFFF"; //EEF1F2

getRowFunction = function(col, table){

	return function(dp) {

		var curData = table.dataProvider().source.data;
		for (var i=0; i<curData.length; i++) {	
			if(curData[i][col].dp == dp) {
//				console.log("Updating row ", i, " for dp ", dp);
				return i +1;
			}
		};
	}
}

// setup blank tables
//console.log("Setting up tables...");
var enviroTable = webMI.callExtension("SYSTEM.LIBRARY.ATVISE.QUICKDYNAMICS.Table", { "gElement": document.getElementById("commands"),"sortedByColumn":0, "autoResize":true, "height":600, "width":900});
enviroTable.setConfiguration({rowHeight:RowHeight, sortingUp:false, drawStatusBar:false});
enviroHeaders.push({name: "Component ", width: 400, fontSize: fontSize});
enviroHeaders.push({name: "Type", width: 200, fontSize: fontSize});
enviroHeaders.push({name: "Value", width: 180, fontSize: fontSize});
enviroHeaders.push({name: "Unit", width: 110, fontSize: fontSize});
enviroTable.setHeaders(enviroHeaders);


function initializeEnviroTable(valueList, table){

	//initialize table
	var nodearray = [];
	for (var i=0; i<valueList.length; i++) {	
//		console.log("=====================================Looking at : ", valueList[i]);
		var datarow = [];
	
		datarow[0] = {text: valueList[i].ComponentName, fill:linefill, fontSize: fontcolumn};
		datarow[1] = {text: valueList[i].ComponentType, fill:linefill, fontSize: fontcolumn};
		datarow[2] = {text: "...", fill:linefill, dp:valueList[i].DP};
		datarow[3] = {text: valueList[i].Unit, fill:linefill, fontSize: fontcolumn};
		nodearray[i] = datarow;	
	}
	table.setDataProvider({data: nodearray});

	//Set Update Function
	for (var i=0; i<valueList.length; i++) {
		addSubscribe(3, getRowFunction(2, table), valueList[i].DP, valueList[i].Type, table);
	}
}


var enviroModule = "/QC_DELTA/";

var EnviroMonitoringValues =[

{ComponentName: "System Running", DP: enviroModule +".DeltaTherm_CoolingValues.System_On", ComponentType: "System", Type: "BOOL", Unit: ""},
{ComponentName: "Pump 1 Running", DP: enviroModule +".DeltaTherm_CoolingValues.Pump_Circuit_1_On", ComponentType: "Pump", Type: "BOOL", Unit: ""},
{ComponentName: "Pump 2 Running", DP: enviroModule +".DeltaTherm_CoolingValues.Pump_Circuit_2_On", ComponentType: "Pump", Type: "BOOL", Unit: ""},
{ComponentName: "Compressor Running", DP: enviroModule +".DeltaTherm_CoolingValues.Compressor_On", ComponentType: "Compressor", Type: "BOOL", Unit: ""},
{ComponentName: "Low Pressure in Circuit", DP: enviroModule +".DeltaTherm_CoolingValues.Alarm_ND_CoolCircuit", ComponentType: "Alarm", Type: "BOOL", Unit: ""},
{ComponentName: "High Pressure in Circuit", DP: enviroModule +".DeltaTherm_CoolingValues.Alarm_HD_CoolCircuit", ComponentType: "Alarm", Type: "BOOL", Unit: ""},
{ComponentName: "Compressor Error", DP: enviroModule +".DeltaTherm_CoolingValues.Alarm_Compressor", ComponentType: "Alarm", Type: "BOOL", Unit: ""},
{ComponentName: "Valve Error", DP: enviroModule +".DeltaTherm_CoolingValues.Alarm_valve", ComponentType: "Alarm", Type: "BOOL", Unit: ""},
{ComponentName: "Pump 1 Error", DP: enviroModule +".DeltaTherm_CoolingValues.Alarm_Pump_1", ComponentType: "Alarm", Type: "BOOL", Unit: ""},
{ComponentName: "Pump 2 Error", DP: enviroModule +".DeltaTherm_CoolingValues.Alarm_Pump_2", ComponentType: "Alarm", Type: "BOOL", Unit: ""},
{ComponentName: "Dry Operation Error", DP: enviroModule +".DeltaTherm_CoolingValues.Alarm_Dry_Running", ComponentType: "Alarm", Type: "BOOL", Unit: ""},
{ComponentName: "Heater Error", DP: enviroModule +".DeltaTherm_CoolingValues.Alarm_Protect_Heater", ComponentType: "Alarm", Type: "BOOL", Unit: ""},
{ComponentName: "STB Heater Error", DP: enviroModule +".DeltaTherm_CoolingValues.Alarm_STB_Heater", ComponentType: "Alarm", Type: "BOOL", Unit: ""},
{ComponentName: "Frost Protection Error", DP: enviroModule +".DeltaTherm_CoolingValues.Alarm_Frost_Protect", ComponentType: "Alarm", Type: "BOOL", Unit: ""},
{ComponentName: "Temperature Circuit 1 Low", DP: enviroModule +".DeltaTherm_CoolingValues.Temp_Circuit_1_Low", ComponentType: "Alarm", Type: "BOOL", Unit: ""},
{ComponentName: "Temperature Circuit 1 High", DP: enviroModule +".DeltaTherm_CoolingValues.Temp_Circuit_1_High", ComponentType: "Alarm", Type: "BOOL", Unit: ""},
{ComponentName: "Temperature Circuit 2 Low", DP: enviroModule +".DeltaTherm_CoolingValues.Temp_Circuit_2_Low", ComponentType: "Alarm", Type: "BOOL", Unit: ""},
{ComponentName: "Temperature Circuit 2 High", DP: enviroModule +".DeltaTherm_CoolingValues.Temp_Circuit_2_High", ComponentType: "Alarm", Type: "BOOL", Unit: ""},
{ComponentName: "Setpoint Circuit 2", DP: enviroModule +".DeltaTherm_CoolingValues.Setpoint_Circuit_2", ComponentType: "Temperature", Type: "REAL", Unit: "°C"},
{ComponentName: "Setpoint Tank", DP: enviroModule +".DeltaTherm_CoolingValues.Setpoint_Tank", ComponentType: "Temperature", Type: "REAL", Unit: "°C"},
{ComponentName: "Tank Temperature", DP: enviroModule +".DeltaTherm_CoolingValues.Temp_Tank", ComponentType: "Temperature", Type: "REAL", Unit: "°C"},
{ComponentName: "Temperature flowing Circuit 2", DP: enviroModule +".DeltaTherm_CoolingValues.Temp_flow_Circuit_2", ComponentType: "Temperature", Type: "REAL", Unit: "°C"},
{ComponentName: "Temperature Return Circuit_2", DP: enviroModule +".DeltaTherm_CoolingValues.Temp_Return_Circuit_2", ComponentType: "Temperature", Type: "REAL", Unit: "°C"},

{ComponentName: "Inverter Ready", DP: enviroModule +".Controller_IOs[1].State", ComponentType: "System", Type: "BOOL", Unit: ""},

{ComponentName: "NO Cooling Water Level Low", DP: enviroModule +".Controller_IOs[2].State", ComponentType: "Alarm", Type: "BOOL", Unit: ""},


{ComponentName: "Cooling Fan 1", DP: enviroModule +".Controller_IOs[4].State", ComponentType: "System", Type: "BOOL", Unit: ""},
{ComponentName: "Cooling Fan 2", DP: enviroModule +".Controller_IOs[5].State", ComponentType: "System", Type: "BOOL", Unit: ""},
{ComponentName: "Valve Cooling Water Open", DP: enviroModule +".Controller_IOs[6].State", ComponentType: "System", Type: "BOOL", Unit: ""},

{ComponentName: "Temperature Returnflow Inverter", DP: enviroModule +".Controller_IOs[7].Average", ComponentType: "Temperature", Type: "REAL", Unit: "°C"},
{ComponentName: "Environment Temperature", DP: enviroModule +".Controller_IOs[8].Average", ComponentType: "Temperature", Type: "REAL", Unit: "°C"},
{ComponentName: "Indoor 1 Temperature", DP: enviroModule +".Controller_IOs[9].Average", ComponentType: "Temperature", Type: "REAL", Unit: "°C"},
{ComponentName: "Indoor 2 Temperature", DP: enviroModule +".Controller_IOs[10].Average", ComponentType: "Temperature", Type: "REAL", Unit: "°C"},
{ComponentName: "Temperature Transformator Room", DP: enviroModule +".Controller_IOs[11].Average", ComponentType: "Temperature", Type: "REAL", Unit: "°C"},
{ComponentName: "Dew Point Battery Room", DP: enviroModule +".Controller_IOs[12].Average", ComponentType: "Temperature", Type: "REAL", Unit: "°C"},
{ComponentName: "Fan HVAC", DP: enviroModule +".Controller_IOs[14].Average", ComponentType: "System", Type: "REAL", Unit: "°C"},

{ComponentName: "Bypass Valve", DP: enviroModule +".Controller_IOs[15].Value", ComponentType: "System", Type: "REAL", Unit: "%"},

{ComponentName: "Heater ON", DP: enviroModule +".Controller_IOs[16].State", ComponentType: "System", Type: "BOOL", Unit: ""},

{ComponentName: "Dewing Hysterese Warning", DP: enviroModule +".Controller_IOs[17].State", ComponentType: "Temperature", Type: "REAL", Unit: "°C"},
{ComponentName: "Solar Sensor", DP: enviroModule +".Controller_IOs[20].State", ComponentType: "System", Type: "REAL", Unit: "W/m2"},

]



initializeEnviroTable(EnviroMonitoringValues, enviroTable);


webMI.callExtension("SYSTEM.LIBRARY.PROJECT.QUICKDYNAMICS.Theme", {"action":"font family", "defaultValue":"font family", "id":"id_3", "key":"FontFamily", "property":""});
},{},{}]},window);]]></script>
</svg>
