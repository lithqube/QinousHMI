<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:atv="http://webmi.atvise.com/2007/svgext" width="429" version="1.2" height="355.5" visibility="hidden" atv:oe="2BC6J3FAD3C6P2OEI9MCM759A8C5D35F769AICH4D9M1C1MBPDLCT45CB68GEDG87" xmlns="http://www.w3.org/2000/svg">
 <defs>
  <linearGradient id="linear_12" y1="-0.0183441" x1="1" y2="1" gradientUnits="objectBoundingBox" x2="1">
   <stop offset="0" stop-color="#FFFFFF"/>
   <stop offset="1" stop-color="#FFFFFF"/>
  </linearGradient>
 </defs>
 <desc>Provides an on-screen keyboard display for numerical input.</desc>
 <title>Numerical keyboard</title>
 <metadata/>
 <rect width="428.915" x="0.041" y="0" fill="#FFFFFF" rx="0" height="75" ry="0" stroke="none" id="id_0" atv:refpx="214.499" atv:refpy="37.5"/>
 <text x="414.5" y="50" atv:dynamic="true" fill="#647A8F" font-family="Varela Round" text-anchor="end" id="textValue" atv:refpx="414" atv:refpy="37.5" font-size="36"> </text>
 <rect width="107" x="0.5" y="75" fill="url(#linear_12)" height="70" stroke="#646464" id="btn7" atv:refpx="60.498" stroke-width="1" atv:refpy="110"/>
 <text x="44" y="122.5" fill="#647A8F" font-family="Varela Round" id="text7" atv:refpx="60.5" atv:refpy="35" font-size="36">7</text>
 <rect width="107" x="107.5" y="75" fill="url(#linear_12)" height="70" stroke="#646464" id="btn8" atv:refpx="413.375" stroke-width="1" atv:refpy="786.275"/>
 <text x="151" y="122.5" fill="#647A8F" font-family="Varela Round" id="text8" atv:refpx="167.5" atv:refpy="110" font-size="36">8</text>
 <rect width="107" x="214.5" y="75" fill="url(#linear_12)" height="70" stroke="#646464" id="btn9" atv:refpx="274.5" stroke-width="1" atv:refpy="35"/>
 <text x="258" y="122.5" fill="#647A8F" font-family="Varela Round" id="text9" atv:refpx="274.5" atv:refpy="35" font-size="36">9</text>
 <rect width="107" x="0.5" y="145" fill="url(#linear_12)" height="70" stroke="#646464" id="btn4" atv:refpx="60.498" stroke-width="1" atv:refpy="105"/>
 <text x="44" y="192.5" fill="#647A8F" font-family="Varela Round" id="text4" atv:refpx="60.5" atv:refpy="105" font-size="36">4</text>
 <rect width="107" x="107.5" y="145" fill="url(#linear_12)" height="70" stroke="#646464" id="btn5" atv:refpx="167.5" stroke-width="1" atv:refpy="105"/>
 <text x="151" y="192.5" fill="#647A8F" font-family="Varela Round" id="text5" atv:refpx="167.5" atv:refpy="105" font-size="36">5</text>
 <rect width="107" x="214.5" y="145" fill="url(#linear_12)" height="70" stroke="#646464" id="btn6" atv:refpx="274.5" stroke-width="1" atv:refpy="105"/>
 <text x="258" y="192.5" fill="#647A8F" font-family="Varela Round" id="text6" atv:refpx="274.5" atv:refpy="105" font-size="36">6</text>
 <rect width="107" x="321.5" y="145" fill="url(#linear_12)" height="70" stroke="#646464" id="btnCancel" atv:refpx="381.5" stroke-width="1" atv:refpy="180"/>
 <text x="363" y="192.5" fill="#647A8F" font-family="Varela Round" id="textCancel" atv:refpx="381.5" atv:refpy="180" font-size="36">X</text>
 <rect width="107" x="0.5" y="215" fill="url(#linear_12)" height="70" stroke="#646464" id="btn1" atv:refpx="60.498" stroke-width="1" atv:refpy="175"/>
 <text x="44" y="262.5" fill="#647A8F" font-family="Varela Round" id="text1" atv:refpx="60.5" atv:refpy="175" font-size="36">1</text>
 <polygon fill="#9695de" id="id_23" points="123,202 21,60 144,322 24,170 252,166 87,186 218,62 164,290 51,269 152,255 56,110 101,45 333,334 " stroke="#35ac90" stroke-width="5"/>
 <rect width="107" x="107.5" y="215" fill="url(#linear_12)" height="70" stroke="#646464" id="btn2" atv:refpx="167.5" stroke-width="1" atv:refpy="175"/>
 <polyline fill="#72dee1" id="id_7" points="196,320 291,340 293,97 80,11 331,264 147,213 12,139 153,186 294,150 " stroke="#fad03a" stroke-width="5"/>
 <text x="151" y="262.5" fill="#647A8F" font-family="Varela Round" id="text2" atv:refpx="167.5" atv:refpy="175" font-size="36">2</text>
 <rect width="107" x="214.5" y="215" fill="url(#linear_12)" height="70" stroke="#646464" id="btn3" atv:refpx="274.5" stroke-width="1" atv:refpy="175"/>
 <line fill="#f034c9" id="id_22" stroke="#b8e19c" stroke-width="2" x1="334" x2="304" y1="241" y2="52"/>
 <text x="258" y="262.5" fill="#647A8F" font-family="Varela Round" id="text3" atv:refpx="274.5" atv:refpy="175" font-size="36">3</text>
 <line fill="#c90e71" id="id_9" stroke="#891955" stroke-width="1" x1="417" x2="125" y1="19" y2="239"/>
 <rect width="107" x="321.5" y="215" fill="url(#linear_12)" height="140" stroke="#646464" id="btnOk" atv:refpx="381.5" stroke-width="1" atv:refpy="285"/>
 <line fill="#f3c1ca" id="id_32" stroke="#d58530" stroke-width="1" x1="42" x2="24" y1="274" y2="184"/>
 <polyline points="356.645,287.807 370.327,302.761 392.914,267.238" fill="#ffffff" stroke="#ffffff" fill-opacity="0" id="id_6" atv:refpx="381.28" atv:refpy="285" stroke-width="6"/>
 <rect width="107" x="0.5" y="285" fill="url(#linear_12)" height="70" stroke="#646464" id="btnMinus" atv:refpx="60.498" stroke-width="1" atv:refpy="245"/>
 <rect fill="#7ebcfd" height="5" id="id_1" stroke="#a55095" stroke-width="4" width="92" x="200" y="101"/>
 <text x="44" y="332.5" fill="#647A8F" font-family="Varela Round" id="textMinus" atv:refpx="60.5" atv:refpy="245" font-size="36">-</text>
 <rect width="107" x="107.5" y="285" fill="url(#linear_12)" height="70" stroke="#646464" id="btn0" atv:refpx="167.5" stroke-width="1" atv:refpy="245"/>
 <polyline fill="#f32bef" id="id_37" points="53,93 247,46 392,139 171,152 136,195 " stroke="#14e2d4" stroke-width="5"/>
 <text x="151" y="332.5" fill="#647A8F" font-family="Varela Round" id="text0" atv:refpx="167.5" atv:refpy="245" font-size="36">0</text>
 <rect fill="#3ca135" height="138" id="id_24" stroke="#95c157" stroke-width="2" width="330" x="69" y="150"/>
 <circle cx="202" cy="72" fill="#bdd343" id="id_20" r="82" stroke="#f245ef" stroke-width="3"/>
 <ellipse cx="117" cy="93" fill="#8bced3" id="id_29" rx="212" ry="1" stroke="#dbf3e9" stroke-width="3"/>
 <rect width="107" x="214.5" y="285" fill="url(#linear_12)" height="70" stroke="#646464" id="btnComma" atv:refpx="274.5" stroke-width="1" atv:refpy="245"/>
 <rect fill="#47e390" height="34" id="id_10" stroke="#27ca14" stroke-width="3" width="7" x="419" y="276"/>
 <polygon fill="#827a1c" id="id_27" points="80,316 227,7 67,313 427,329 343,199 72,217 " stroke="#850fe4" stroke-width="1"/>
 <text x="258" y="332.5" fill="#647A8F" font-family="Varela Round" id="textComma" atv:refpx="274.5" atv:refpy="245" font-size="36">.</text>
 <line fill="#4a26d0" id="id_15" stroke="#6ba72c" stroke-width="5" x1="308" x2="255" y1="139" y2="97"/>
 <rect width="107" x="321.5" y="75" fill="url(#linear_12)" height="70" stroke="#646464" id="btnDel" atv:refpx="381.5" stroke-width="1" atv:refpy="110"/>
 <line fill="#7cf14e" id="id_35" stroke="#7147bf" stroke-width="5" x1="39" x2="384" y1="80" y2="174"/>
 <polyline points="391.834,101 391.834,119 367.834,119 357.834,110 367.834,101 391.834,101" fill="#ffffff" stroke="none" id="id_3" atv:refpx="405.683" atv:refpy="94.1" stroke-width="2"/>
 <circle cx="273" cy="92" fill="#96e4e7" id="id_19" r="22" stroke="#964a83" stroke-width="3"/>
 <line fill="#140834" id="id_14" stroke="#49fec0" stroke-width="4" x1="331" x2="305" y1="238" y2="57"/>
 <line stroke="#647A8F" id="id_4" y1="106.513" atv:refpx="418.211" x1="375.201" y2="113.487" atv:refpy="188.732" stroke-width="1.374" x2="383.936"/>
 <line stroke="#647A8F" id="id_5" y1="106.513" atv:refpx="418.211" x1="383.936" y2="113.487" atv:refpy="188.732" stroke-width="1.374" x2="375.201"/>
 <g id="id_2" atv:refpx="214.5" atv:refpy="215">
  <rect width="107" x="0.5" y="75" atv:dynamic="true" fill="#1c7eff" height="70" stroke="none" fill-opacity="0" id="seven" atv:refpx="54" atv:refpy="185"/>
  <ellipse cx="327" cy="225" fill="#384fff" id="id_34" rx="18" ry="125" stroke="#f5c8db" stroke-width="3"/>
  <polygon fill="#e432d6" id="id_26" points="399,321 416,276 416,117 216,16 255,73 16,190 309,301 208,47 9,102 215,331 306,5 " stroke="#dcb2a2" stroke-width="5"/>
  <rect width="107" x="107.5" y="75" fill="#1c7eff" atv:dynamic="true" height="70" stroke="none" fill-opacity="0" id="eight" atv:refpx="161.5" atv:refpy="110"/>
  <polyline fill="#1f0fc9" id="id_12" points="105,328 372,4 329,231 84,63 9,230 132,296 55,260 359,274 294,164 322,100 " stroke="#39d912" stroke-width="2"/>
  <rect width="107" x="214.5" y="75" fill="#1c7eff" atv:dynamic="true" height="70" stroke="none" fill-opacity="0" id="nine" atv:refpx="482.5" atv:refpy="110"/>
  <polyline fill="#4d6435" id="id_36" points="1,301 47,283 209,184 142,150 45,316 " stroke="#bde69e" stroke-width="3"/>
  <polyline fill="#1bb25b" id="id_30" points="322,43 319,205 78,147 289,78 78,184 117,311 175,143 88,350 42,211 40,238 248,316 378,180 " stroke="#ef15d9" stroke-width="2"/>
  <rect width="107" x="0.5" y="145" fill="#1c7eff" atv:dynamic="true" height="70" stroke="none" fill-opacity="0" id="four" atv:refpx="54" atv:refpy="325"/>
  <circle cx="234" cy="271" fill="#cd1096" id="id_28" r="132" stroke="#3e82c9" stroke-width="3"/>
  <rect width="107" x="107.5" y="145" fill="#1c7eff" atv:dynamic="true" height="70" stroke="none" fill-opacity="0" id="five" atv:refpx="161" atv:refpy="325"/>
  <rect width="107" x="214.5" y="145" fill="#1c7eff" atv:dynamic="true" height="70" stroke="none" fill-opacity="0" id="six" atv:refpx="482.5" atv:refpy="180"/>
  <polyline fill="#e20404" id="id_25" points="249,289 70,221 282,66 178,7 175,283 " stroke="#a05d65" stroke-width="2"/>
  <rect width="107" x="321.5" y="145" fill="#1c7eff" atv:dynamic="true" height="70" stroke="none" fill-opacity="0" id="cancel" atv:refpx="696.5" atv:refpy="180"/>
  <circle cx="38" cy="232" fill="#99219c" id="id_16" r="164" stroke="#ab0aea" stroke-width="5"/>
  <rect width="107" x="0.5" y="215" fill="#1c7eff" atv:dynamic="true" height="70" stroke="none" fill-opacity="0" id="one" atv:refpx="54" atv:refpy="465"/>
  <rect fill="#d979f4" height="10" id="id_33" stroke="#5c9b01" stroke-width="4" width="334" x="61" y="241"/>
  <line fill="#7eaa12" id="id_18" stroke="#573afa" stroke-width="5" x1="229" x2="304" y1="204" y2="49"/>
  <rect width="107" x="107.5" y="215" fill="#1c7eff" atv:dynamic="true" height="70" stroke="none" fill-opacity="0" id="two" atv:refpx="161" atv:refpy="465"/>
  <rect fill="#5d7a1b" height="140" id="id_13" stroke="#4b2813" stroke-width="1" width="325" x="92" y="96"/>
  <polygon fill="#a22699" id="id_11" points="321,165 188,320 233,339 1,61 413,267 177,157 327,306 173,347 26,87 " stroke="#192225" stroke-width="2"/>
  <rect width="107" x="214.5" y="215" fill="#1c7eff" atv:dynamic="true" height="70" stroke="none" fill-opacity="0" id="three" atv:refpx="268" atv:refpy="465"/>
  <rect width="107" x="321.28" y="215" fill="#1c7eff" atv:dynamic="true" height="140" stroke="none" fill-opacity="0" id="ok" atv:refpx="696.06" atv:refpy="250"/>
  <polyline fill="#f2d96d" id="id_31" points="75,110 169,236 249,213 265,36 193,0 7,155 " stroke="#2b17be" stroke-width="1"/>
  <rect width="107" x="0.5" y="285" fill="#1c7eff" atv:dynamic="true" height="70" stroke="none" fill-opacity="0" id="minus" atv:refpx="54" atv:refpy="605"/>
  <circle cx="258" cy="13" fill="#6009b7" id="id_8" r="90" stroke="#322b14" stroke-width="5"/>
  <rect width="107" x="107.5" y="285" fill="#1c7eff" atv:dynamic="true" height="70" stroke="none" fill-opacity="0" id="zero" atv:refpx="161" atv:refpy="605"/>
  <rect width="107" x="214.5" y="285" fill="#1c7eff" atv:dynamic="true" height="70" stroke="none" fill-opacity="0" id="comma" atv:refpx="268" atv:refpy="605"/>
  <ellipse cx="254" cy="19" fill="#6db389" id="id_17" rx="101" ry="17" stroke="#13c244" stroke-width="3"/>
  <rect width="107" x="321.5" y="75" fill="#1c7eff" atv:dynamic="true" height="70" stroke="none" fill-opacity="0" id="del" atv:refpx="696.5" atv:refpy="110"/>
  <rect fill="#f21f39" height="4" id="id_21" stroke="#65eab1" stroke-width="3" width="5" x="119" y="307"/>
 </g>
 <script xlink:href="../../webmi.js" type="text/ecmascript"/>
 <script type="text/ecmascript"><![CDATA[webMI.proxy({"":[function(webMI,window,document,self){var q = webMI.query;
var actualText;
var decSeparator = '.';
var hoverColor = '#0531f2';
var numbers = [
	'minValue', 'maxValue', 'digitsBeforePoint', 'digitsAfterPoint'
];
var isOkButtonEnabled = false;

function setButtonEnabled(button, value) {
	isOkButtonEnabled = value;
	webMI.gfx.setFill(button, value ? "url(#linear_12)" : "#c8c8c8");
}

function isValid(value) {
	if (isNaN(value))
		return false;
	if (!isNaN(q.maxValue) && value > q.maxValue)
		return false;
	if (!isNaN(q.minValue) && value < q.minValue)
		return false;

	return true;
}

function makeStars(length) {
	return new Array(length + 1).join("*");
}

function setText(text) {
	actualText = text;

	if (webMI.query["password"] == "Yes")
		text = makeStars(cutUnit(text).length) + q.unit;

	webMI.gfx.setText("textValue", text);
}

for (var i in numbers)
	q[numbers[i]] = parseFloat(q[numbers[i]]);

q.unit = (q.unit != "") ? " " + q.unit : q.unit;

setButtonEnabled("btnOk", isValid(
	parseFloat(webMI.query.value)
));
setText(webMI.query.value + " " + webMI.query.unit);

function cutUnit(text) {
	if (q.unit.length == 0) return text;
	return text.substr(0, text.indexOf(q.unit));
}

var mousedowns = [
	'zero', 'one', 'two', 'three', 'four',
	'five', 'six', 'seven', 'eight', 'nine'
];

var mouseFunction = function(mouse, group, color) {
	var _func = function(e) {
		if (group == "ok" && !isOkButtonEnabled)
			return;

		webMI.gfx.setFillOpacity(group, color);
	};

	webMI.addEvent(group, mouse, _func);

	if (mouse == 'mouseup')
		webMI.addEvent(group, 'mouseout', _func);
};

var setFunction = function (group, item, number) {

	webMI.addEvent(group, 'click', function(e) {
		var val = cutUnit(actualText) + number;
		var minus = (val.indexOf('-') == -1) ? 0 : 1;
		var indexOfDec = val.indexOf(decSeparator);
		var digitsAfter = val.substr(indexOfDec + 1).length;
		var digitsBefore = val.substr(minus, indexOfDec - minus).length;

		if (indexOfDec == -1) {
			digitsBefore = digitsAfter - minus;
			digitsAfter = 0;
		}

		if (digitsBefore > q.digitsBeforePoint || digitsAfter > q.digitsAfterPoint)
			return;

		setButtonEnabled("btnOk", isValid(
			parseFloat(val)
		));
		setText(val + q.unit);
	});

};

for (var i=0; i < mousedowns.length; i++) {
	mouseFunction('mousedown', mousedowns[i], 0.5);
	mouseFunction('mouseup', mousedowns[i], 0);
	setFunction(mousedowns[i], 'btn' + i, i);
}

mouseFunction('mousedown', 'cancel', 0.5);
mouseFunction('mousedown', 'ok', 0.5);
mouseFunction('mousedown', 'minus', 0.5);
mouseFunction('mousedown', 'comma', 0.5);
//mouseFunction('mousedown', 'del', 0.5);

var delDown;

webMI.addEvent('del', 'mousedown', function(e) {
	webMI.gfx.setFillOpacity('del', 0.5);
	delDown = setTimeout(function() {
		setButtonEnabled("btnOk", false);
		setText(' ' + q.unit);
	}, 1500);
});

mouseFunction('mouseup', 'cancel', 0);
mouseFunction('mouseup', 'ok', 0);
mouseFunction('mouseup', 'minus', 0);
mouseFunction('mouseup', 'comma', 0);
//mouseFunction('mouseup', 'del', 0);

var delMouseUp = function(e) {
	webMI.gfx.setFillOpacity('del', 0);
	clearTimeout(delDown);
};

webMI.addEvent('del', 'mouseup', delMouseUp);
webMI.addEvent('del', 'mouseout', delMouseUp);

webMI.addEvent('minus', 'click', function(e) {
	var textValue = cutUnit(actualText);
	var value = (-1) * parseFloat(textValue);

	if (isNaN(value))
		return;

	setButtonEnabled("btnOk", isValid(value));
	setText(value + q.unit);
});



webMI.addEvent('del', 'click', function(e) {
	var text = cutUnit(actualText);
	text = text.substr(0, text.length-1) + q.unit;

	setButtonEnabled("btnOk", isValid(
		parseFloat(text)
	));
	setText(text);
});



webMI.addEvent('cancel', 'click', function(e) {
	webMI.display.closeWindow();
});



webMI.addEvent('ok', 'click', function(e) {
	if (!isOkButtonEnabled)
		return;

	if (q.queryConfirm == 'true' && !confirm(q.queryConfirmText)) return;

	var value = parseFloat(cutUnit(actualText));

	if (q.target != undefined) {
		webMI.data.write(q.target, value);
	}

	webMI.trigger.fire("valuechanged", value, "");

	if (q.trigger)
		webMI.trigger.fire(q.trigger, value);

	webMI.display.closeWindow();
});



webMI.addEvent('comma', 'click', function(e) {
	var textValue = cutUnit(actualText);

	if (textValue.indexOf(decSeparator) == -1) textValue += decSeparator;

	setText(textValue + q.unit);
});
},{},{"password":"No","queryConfirmText":"Wollen Sie den Wert wirklich setzen?","unit":"","value":""}]},window);]]></script>
</svg>
